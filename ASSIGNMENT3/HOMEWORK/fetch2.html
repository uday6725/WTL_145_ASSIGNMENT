<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch</title>
</head>
<body>
    <button id="btn1">Click me</button>
    <div id="div"></div>

    <script>
    document.getElementById("btn1").addEventListener("click", () => {
        let p = fetch("https://jsonplaceholder.typicode.com/todos");
        p.then((res) => {
            let r = res.json(); 
            r.then(data => {
 
                let table = document.createElement("table");
                table.border = "1";
                
                
                let keys = Object.keys(data[0]);

                let headerRow = document.createElement("tr");
                for (let i = 0; i < keys.length; i++) {
                    let th = document.createElement("th");
                    th.textContent = keys[i];
                    headerRow.appendChild(th);
                }
                table.appendChild(headerRow);

                
                for (let i = 0; i < data.length; i++) {
                    let row = document.createElement("tr");
                    for (let j = 0; j < keys.length; j++) {
                        let td = document.createElement("td");
                        td.textContent = data[i][keys[j]];
                        row.appendChild(td);
                    }
                    table.appendChild(row);
                }

                
                let container = document.getElementById("div");
               
                container.appendChild(table);
            });
            r.catch(err => {
                console.log(err);
            });
        });
        p.catch(err => {
            console.log(err);
        });
    });
    </script>
</body>
</html>
